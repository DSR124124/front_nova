<div class="login-form-container">
  <!-- Header -->
  <div class="form-header">
    <h2 class="form-title">
      <i class="pi pi-user"></i>
      Iniciar Sesión
    </h2>
    <p class="form-subtitle">
      Accede a tu cuenta para disfrutar de todos los momentos especiales
    </p>
  </div>

  <!-- Loading Spinner -->
  <div *ngIf="loading" class="loading-container">
    <p-progressSpinner strokeWidth="3" />
    <p class="loading-text">Iniciando sesión...</p>
  </div>

  <!-- Formulario -->
  <div class="form-wrapper" *ngIf="!loading">
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">

      <!-- Usuario -->
      <div class="form-field">
        <label for="username" class="field-label">
          Usuario <span class="required">*</span>
        </label>
        <input
          type="text"
          pInputText
          id="username"
          formControlName="username"
          placeholder="Ingresa tu nombre de usuario"
          [class.field-error]="isFieldInvalid('username')"
          class="field-input"
        />
        <small *ngIf="isFieldInvalid('username')" class="error-message">
          <i class="pi pi-exclamation-circle"></i>
          {{ getFieldError('username') }}
        </small>
      </div>

      <!-- Contraseña -->
      <div class="form-field">
        <label for="password" class="field-label">
          Contraseña <span class="required">*</span>
        </label>
        <p-password
          id="password"
          formControlName="password"
          [toggleMask]="true"
          [feedback]="false"
          placeholder="Ingresa tu contraseña"
          [class.field-error]="isFieldInvalid('password')"
          styleClass="field-input"
        />
        <small *ngIf="isFieldInvalid('password')" class="error-message">
          <i class="pi pi-exclamation-circle"></i>
          {{ getFieldError('password') }}
        </small>
      </div>

      <!-- Recordarme -->
      <div class="form-field">
        <div class="remember-me-checkbox">
          <p-checkbox
            [(ngModel)]="rememberMe"
            [ngModelOptions]="{standalone: true}"
            inputId="rememberMe"
            [binary]="true"
          />
          <label for="rememberMe" class="p-checkbox-label">
            Recordarme
          </label>
        </div>
      </div>

      <!-- Botones de acción -->
      <div class="form-actions">
        <p-button
          type="button"
          label="¿Olvidaste tu contraseña?"
          severity="secondary"
          icon="pi pi-question-circle"
          [outlined]="true"
          (onClick)="onForgotPassword()"
          styleClass="cancel-btn"
        />

        <p-button
          type="submit"
          label="Iniciar Sesión"
          icon="pi pi-sign-in"
          [loading]="loading"
          [disabled]="loginForm.invalid"
          styleClass="submit-btn"
        />
      </div>

    </form>
  </div>

  <!-- Enlaces adicionales -->
  <div class="additional-links">
    <p-button
      label="Crear cuenta nueva"
      link="true"
      icon="pi pi-user-plus"
      (onClick)="onRegister()"
      styleClass="link-btn"
    />
  </div>

</div>

<!-- Toast para mensajes -->
<p-toast />
