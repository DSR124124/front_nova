<div class="forgot-password-container">
  <!-- Header -->
  <div class="forgot-password-header">
    <h2 class="forgot-password-title">
      <i class="pi pi-key"></i>
      Recuperar Contraseña
    </h2>
    <p class="forgot-password-subtitle" *ngIf="!emailSent">
      Ingresa tu email para recibir un enlace de recuperación
    </p>
  </div>

  <!-- Formulario -->
  <div class="forgot-password-wrapper" *ngIf="!emailSent">
    <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()">
      <div class="form-field">
        <label for="email" class="field-label">
          Correo Electrónico <span class="required">*</span>
        </label>
        <input
          pInputText
          id="email"
          formControlName="email"
          [class.field-error]="isFieldInvalid('email')"
          type="email"
          placeholder="Ingresa tu correo electrónico"
          class="field-input"
        />
        <small *ngIf="isFieldInvalid('email')" class="error-message">
          {{ getFieldError('email') }}
        </small>
      </div>

      <div class="form-actions">
        <p-button
          type="submit"
          label="Enviar Enlace de Recuperación"
          icon="pi pi-send"
          [loading]="loading"
          [disabled]="forgotPasswordForm.invalid"
          styleClass="submit-btn"
        />
      </div>
    </form>
  </div>

  <!-- Mensaje de confirmación -->
  <div class="forgot-password-wrapper" *ngIf="emailSent">
    <div class="email-sent-container">
      <div class="success-icon">
        <i class="pi pi-check-circle"></i>
      </div>
      <h3 class="success-title">¡Email Enviado!</h3>
      <p class="success-message">
        Hemos enviado un enlace de recuperación a tu correo electrónico.
        Revisa tu bandeja de entrada y sigue las instrucciones.
      </p>

      <p-message
        severity="info"
        text="Si no recibes el email en unos minutos, revisa tu carpeta de spam."
      />

      <div class="resend-section">
        <p class="resend-text">¿No recibiste el email?</p>
        <p-button
          label="Reenviar Email"
          icon="pi pi-refresh"
          [loading]="loading"
          (onClick)="resendEmail()"
          styleClass="p-button-text"
        />
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="forgot-password-footer">
    <p-button
      label="Volver al Login"
      link="true"
      icon="pi pi-arrow-left"
      (onClick)="onBackToLogin()"
      styleClass="back-btn"
    />
  </div>
</div>

<!-- Toast para mensajes -->
<p-toast />
