<div class="perfil-container">

  <!-- Estado de carga -->
  <div *ngIf="loading" class="loading-state">
    <i class="pi pi-spin pi-spinner loading-icon"></i>
    <p>Cargando perfil...</p>
  </div>

  <!-- Estado de error -->
  <div *ngIf="error && !loading" class="error-state">
    <p-card header="Error" styleClass="error-card">
      <i class="pi pi-exclamation-triangle error-icon"></i>
      <p>{{ error }}</p>
      <p-button
        label="Reintentar"
        icon="pi pi-refresh"
        (onClick)="cargarPerfilUsuario()"
        size="small"
      />
    </p-card>
  </div>

  <!-- Contenido del perfil -->
  <div *ngIf="!loading && !error" class="perfil-content">

    <!-- InformaciÃ³n del usuario -->
    <p-card header="Mi Perfil" styleClass="perfil-card">
      <div class="usuario-info">
        <div class="avatar-section">
          <p-avatar
            [label]="getNombreCompleto().charAt(0)"
            size="xlarge"
            shape="circle"
            styleClass="usuario-avatar">
          </p-avatar>
        </div>

        <div class="datos-usuario">
          <h2>{{ getNombreCompleto() }}</h2>
          <p class="username">{{ '@' + (usuario?.username || '') }}</p>
          <p class="email">{{ usuario?.correo }}</p>

          <div class="detalles-adicionales">
            <div class="detalle-item" *ngIf="usuario?.fechaNacimiento">
              <i class="pi pi-calendar"></i>
              <span>{{ usuario?.fechaNacimiento | date:'dd/MM/yyyy' }}</span>
            </div>
            <div class="detalle-item" *ngIf="usuario?.genero">
              <i class="pi pi-user"></i>
              <span>{{ getGeneroTexto() }}</span>
            </div>
          </div>

          <!-- Acciones del perfil -->
          <div class="acciones-perfil">
            <p-button
              label="Editar Perfil"
              icon="pi pi-pencil"
              [outlined]="true"
              size="small"
            />
          </div>
        </div>
      </div>
    </p-card>

    <!-- Estado de pareja -->
    <p-card header="Estado de Pareja" styleClass="pareja-card">
      <div class="pareja-info">

        <!-- Con pareja -->
        <div *ngIf="tienePareja()" class="pareja-activa">
          <div class="status-section">
            <div class="status-badge activa">
              <i class="pi pi-heart-fill"></i>
              <span>Pareja Activa</span>
            </div>
            <div class="pareja-details">
              <div class="detalle-item">
                <strong>Estado:</strong> {{ getEstadoPareja() }}
              </div>
              <div class="detalle-item" *ngIf="pareja?.fechaCreacion">
                <strong>Desde:</strong> {{ pareja?.fechaCreacion | date:'dd/MM/yyyy' }}
              </div>
            </div>
          </div>
        </div>

        <!-- Sin pareja -->
        <div *ngIf="!tienePareja()" class="sin-pareja">
          <div class="status-section">
            <div class="status-badge inactiva">
              <i class="pi pi-heart"></i>
              <span>Sin Pareja</span>
            </div>
            <p class="mensaje-sin-pareja">
              No tienes una pareja vinculada actualmente.
            </p>
          </div>

          <div class="acciones-pareja">
            <p-button
              label="Buscar Pareja"
              icon="pi pi-search"
              styleClass="action-btn"
            />
            <p-button
              label="Invitar por Username"
              icon="pi pi-user-plus"
              [outlined]="true"
              styleClass="action-btn"
            />
          </div>
        </div>
      </div>
    </p-card>

  </div>
</div>
