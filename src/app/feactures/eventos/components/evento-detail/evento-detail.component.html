<div class="evento-detail-container">
  <!-- Loading Spinner -->
  <div *ngIf="loading" class="loading-container">
    <p-progressSpinner />
    <p>Cargando evento...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !loading" class="error-container">
    <p-message
      severity="error"
      [text]="error"
    />
    <div class="error-actions">
      <p-button
        label="Volver"
        icon="pi pi-arrow-left"
        (onClick)="volverALista()"
        severity="secondary"
      />
    </div>
  </div>

  <!-- Detalle del Evento -->
  <div *ngIf="evento && !loading" class="evento-content">
    <!-- Header del Evento -->
    <div class="evento-header">
      <div class="header-info">
        <div class="evento-tipo">
          <p-tag
            [value]="evento.tipo || 'Evento'"
            [severity]="getTipoColor(evento.tipo)"
            [icon]="getTipoIcono(evento.tipo)"
          />
        </div>
        <h1 class="evento-titulo">{{ evento.titulo }}</h1>
        <p class="evento-descripcion" *ngIf="evento.descripcion">
          {{ evento.descripcion }}
        </p>
      </div>

      <div class="header-actions">
        <p-button
          label="Editar"
          icon="pi pi-pencil"
          (onClick)="editarEvento()"
        />
        <p-button
          label="Eliminar"
          icon="pi pi-trash"
          (onClick)="eliminarEvento()"
          severity="danger"
        />
      </div>
    </div>

    <!-- Información Principal -->
    <div class="evento-main">
      <div class="main-grid">
        <!-- Fecha y Tiempo -->
        <p-card header="📅 Fecha y Hora" styleClass="info-card">
          <div class="fecha-info">
            <div class="fecha-principal">
              <i class="pi pi-calendar"></i>
              <span>{{ formatearFecha(evento.fecha) }}</span>
            </div>
            <div class="tiempo-info">
              <i class="pi pi-clock"></i>
              <span>{{ formatearHora(evento.fecha) }}</span>
            </div>
          </div>
        </p-card>

        <!-- Estado del Evento -->
        <p-card header="⏰ Estado" styleClass="info-card">
          <div class="estado-info">
            <p-message
              [severity]="getEstadoEvento().severity"
              [text]="getEstadoEvento().texto"
            />
            <div class="dias-restantes">
              <i class="pi pi-calendar-times"></i>
              <span>{{ getDiasRestantesTexto() }}</span>
            </div>
          </div>
        </p-card>

        <!-- Lugar -->
        <p-card header="📍 Lugar" styleClass="info-card" *ngIf="evento.lugarId || evento.lugarNombre">
          <div class="lugar-info">
            <div *ngIf="lugar" class="lugar-detallado">
              <div class="lugar-nombre">
                <i class="pi pi-map-marker"></i>
                <span>{{ lugar.nombre }}</span>
              </div>
              <div class="lugar-direccion" *ngIf="lugar.direccion">
                <i class="pi pi-home"></i>
                <span>{{ lugar.direccion }}</span>
              </div>
              <div class="lugar-categoria" *ngIf="lugar.categoria">
                <p-tag
                  [value]="lugar.categoria"
                  severity="info"
                  size="small"
                />
              </div>
            </div>
            <div *ngIf="!lugar && evento.lugarNombre" class="lugar-basico">
              <i class="pi pi-map-marker"></i>
              <span>{{ evento.lugarNombre }}</span>
            </div>
          </div>
        </p-card>

        <!-- Información de la Pareja -->
        <p-card header="💕 Pareja" styleClass="info-card">
          <div class="pareja-info">
            <i class="pi pi-users"></i>
            <span>Evento de la pareja #{{ evento.parejaId }}</span>
          </div>
        </p-card>
      </div>
    </div>

    <!-- Acciones Adicionales -->
    <div class="evento-actions">
      <p-button
        label="Volver a la Lista"
        icon="pi pi-arrow-left"
        (onClick)="volverALista()"
        severity="secondary"
      />

      <div class="action-buttons">
        <p-button
          label="Compartir"
          icon="pi pi-share-alt"
          severity="info"
        />
        <p-button
          label="Agregar a Calendario"
          icon="pi pi-calendar-plus"
          severity="success"
        />
      </div>
    </div>
  </div>
</div>

<!-- Toast para mensajes -->
<p-toast />

<!-- Diálogo de confirmación -->
<p-confirmDialog />
