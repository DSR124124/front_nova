<div [class]="getItemClass()">
  <!-- Item principal -->
  <div class="sidebar-item-main">
    <p-button
      [label]="!sidebarCollapsed ? item.label : ''"
      [icon]="item.icon"
      [text]="true"
      [routerLink]="item.routerLink || undefined"
      styleClass="w-full justify-content-start sidebar-menu-item"
      [ngClass]="{'active': isActive(), 'no-route': !item.routerLink}"
      (onClick)="hasSubmenu() ? toggleSubmenu() : null"
    >
      <!-- Badge si existe -->
      <span
        *ngIf="item.badge && !sidebarCollapsed"
        class="item-badge"
      >
        {{ item.badge }}
      </span>

      <!-- Flecha para submenús -->
      <i
        *ngIf="hasSubmenu() && !sidebarCollapsed"
        class="pi pi-chevron-down submenu-arrow"
        [class.rotated]="expanded"
      ></i>
    </p-button>
  </div>

  <!-- Submenús -->
  <div
    *ngIf="hasSubmenu() && !sidebarCollapsed"
    [class]="getSubmenuClass()"
  >
    <div
      *ngFor="let subItem of item.items"
      class="submenu-item"
      [class.active]="isSubItemActive(subItem)"
      (click)="navigateTo(subItem.routerLink)"
      role="button"
      tabindex="0"
      (keydown.enter)="navigateTo(subItem.routerLink)"
      (keydown.space)="navigateTo(subItem.routerLink)"
    >
      <i [class]="subItem.icon"></i>
      <span>{{ subItem.label }}</span>
    </div>
  </div>
</div>
